<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Avances del Proyecto</title>
  <link rel="stylesheet" href="css/estilo.css">
</head>

<body>
  <!-- Header con logo y men√∫ -->
  <header id="inicio">
    <nav>
      <div class="logo">
        <a href="index.html">
          <img src="image/logo2.png" alt="Logo del Proyecto">
        </a>
      </div>
      <ul>
        <li><a href="index.html" class="activo">Inicio</a></li>

        <!-- Men√∫ desplegable Avances -->
        <li class="submenu">
          <a href="avances.html">Avances</a>
          <ul class="submenu-opciones">
            <li><a href="avances1.html">Avance 1</a></li>
            <li><a href="avances2.html">Avance 2</a></li>
            <li><a href="avances3.html">Avance 3</a></li>
          </ul>
        </li>

        <li><a href="equipo.html">Equipo</a></li>
        <li><a href="documentacion.html">Documentaci√≥n T√©cnica</a></li>
      </ul>
    </nav>
  </header>

  <!-- Banner -->
  <section class="banner">
    <img src="image/Servidor..png" alt="Banner avances del proyecto">
    <h1>Avances</h1>
  </section>
  <!-- Secci√≥n de avances -->
  <section class="contenedor-avances">
    <h2>Avances por Semana</h2>
    <div class="tarjeta-avance">
      <div class="texto">
        <h3>Semana 4 <span>(05/09 ‚Äì 11/09)</span></h3>
        <p>Durante esta semana el grupo recibi√≥ la devoluci√≥n del profesor sobre el avance presentado anteriormente. A
          partir de sus comentarios fue posible mejorar la documentaci√≥n y corregir los aspectos se√±alados, lo que
          aport√≥ mayor coherencia y solidez al proyecto, sentando bases m√°s firmes para las siguientes etapas.
          En el plano t√©cnico se resolvi√≥ un error que aparec√≠a al momento de conectar el ESP32 al Arduino IDE. Dicho
          problema estaba relacionado con Python y pudo solucionarse gracias a la informaci√≥n obtenida en foros. Una vez
          resuelto, se prob√≥ un c√≥digo de verificaci√≥n en el ESP32, el cual funcion√≥ correctamente.
          Adem√°s, se descarg√≥ la librer√≠a correspondiente al sensor DHT11 en Arduino IDE y se procedi√≥ a realizar el
          cableado inicial utilizando los cables proporcionados por el profesor. Con este montaje se intent√≥ poner en
          funcionamiento el sensor de temperatura, aunque apareci√≥ el mensaje de error ‚Äúerror 253 Reading from DHT11
          timed out‚Äù,
          el cual suele estar asociado a problemas de conexi√≥n en el cableado o a inconvenientes en la alimentaci√≥n.</p><br>
          <pre><code>
#define LED 2

void setup() {
  // Configuraci√≥n del pin como salida
  pinMode(LED, OUTPUT);
}

void loop() {
  delay(50);
  digitalWrite(LED, HIGH);
  delay(50);
  digitalWrite(LED, LOW);
}
</code></pre><br>
          <p>
          Se realiz√≥ tambi√©n el cableado en protoboard del ESP32 con el sensor DHT11,
          y se configur√≥ el entorno de Arduino IDE para obtener lecturas correctas
          de temperatura y humedad. A continuaci√≥n, se detallan los puntos trabajados:
        </p>

        <ul>
          <li>
            <strong>Esquema de conexi√≥n DHT11 ‚Äì ESP32:</strong>
            VCC ‚Üí 3.3 V (o 5 V seg√∫n m√≥dulo), DATA ‚Üí GPIO 4, GND ‚Üí GND.
          </li>
          <li>
            <strong>Configuraciones en Arduino IDE:</strong>
            Instalaci√≥n de las librer√≠as <em>DHT sensor library</em> (Adafruit) y
            <em>Adafruit Unified Sensor</em>.
            Se seleccion√≥ la placa <em>ESP32 Dev Module</em> (Espressif Systems)
            y se configur√≥ correctamente el puerto COM.
          </li> <br>
          <p><strong>C√≥digo para leer temperatura y humedad:</strong></p>
          <pre><code>
#include "DHT.h"

// üìå CONFIGURACI√ìN DEL PIN Y SENSOR
#define DHTPIN 4      // Pin donde est√° conectado DATA del DHT11
#define DHTTYPE DHT11 // Tipo de sensor

DHT dht(DHTPIN, DHTTYPE);

void setup() {
  Serial.begin(115200);
  Serial.println("Iniciando lectura del sensor DHT11...");
  dht.begin();
}

void loop() {
  // üìå Leemos los valores del sensor
  float humedad = dht.readHumidity();
  float temperatura = dht.readTemperature();

  // Verificamos si hubo error de lectura
  if (isnan(humedad) || isnan(temperatura)) {
    Serial.println("‚ùå Error al leer del DHT11. Revisar conexiones.");
    delay(2000);
    return;
  }

  // üìå Mostramos datos por Monitor Serial
  Serial.print("üå°Ô∏è  Temperatura: ");
  Serial.print(temperatura);
  Serial.print(" ¬∞C  |  üíß Humedad: ");
  Serial.print(humedad);
  Serial.println(" %");

  delay(2000); // Espera 2 segundos antes de la pr√≥xima lectura
}
</code></pre> <br>
          <li>
            <strong>Resultado:</strong>
            El sistema mostr√≥ lecturas de temperatura y humedad en el Monitor Serial cada 2 segundos.
          </li>
          <li>
            <strong>Siguiente paso:</strong>
            Integrar la pantalla OLED para mostrar los datos del sensor.
          </li>
          <li>
            <strong>Esquema de conexi√≥n OLED ‚Äì ESP32:</strong>
            VCC ‚Üí 3.3 V, GND ‚Üí GND, SDA ‚Üí GPIO 21, SCL ‚Üí GPIO 22.
          </li>
          <li>
            <strong>Librer√≠as necesarias para la OLED:</strong>
            <em>Adafruit SSD1306</em> y <em>Adafruit GFX Library</em>.
          </li>
        </ul><br>
        <p><strong>C√≥digo de prueba para la pantalla OLED:</strong></p>
        <pre><code>
#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>

#define ANCHO 128
#define ALTO 64
#define OLED_RESET -1
Adafruit_SSD1306 display(ANCHO, ALTO, &Wire, OLED_RESET);

void setup() {
  Serial.begin(115200);
  if (!display.begin(SSD1306_SWITCHCAPVCC, 0x3C)) {
    Serial.println("‚ùå Pantalla OLED no encontrada.");
    for (;;);
  }
  display.clearDisplay();
  display.setTextSize(2);
  display.setTextColor(SSD1306_WHITE);
  display.setCursor(10, 25);
  display.println("OLED OK!");
  display.display();
}

void loop() {}
</code></pre><br>
        <p>El c√≥digo se carg√≥, pero la pantalla no mostr√≥ nada, lo que indic√≥ un posible problema en conexiones o
          compatibilidad.</p>
      </div>
    </div>
    <div class="tarjeta-avance">
      <div class="texto">
        <h3>Semana 5 <span>(12/09 ‚Äì 18/09)</span></h3>
        <p>Durante esta semana, dos integrantes del grupo continuaron con las pruebas del ESP32 y la pantalla OLED.
        Se procedi√≥ a reinstalar el entorno de desarrollo Arduino IDE y a configurar nuevamente la placa ESP32 en una computadora que no estaba previamente preparada para este trabajo.
        A continuaci√≥n, se realizaron distintas pruebas utilizando c√≥digos b√°sicos de verificaci√≥n con el objetivo de validar el funcionamiento de la pantalla OLED.
        Si bien la configuraci√≥n del entorno se complet√≥ de manera correcta, la pantalla no respondi√≥ y no mostr√≥ ninguna visualizaci√≥n.
        Este inconveniente fue identificado como la principal dificultad t√©cnica de la semana. Se defini√≥ como siguiente paso continuar investigando posibles soluciones y realizar nuevas pruebas en los pr√≥ximos encuentros.</p>
      </div>
    </div>

    <div class="tarjeta-avance">
      <div class="texto">
        <h3>Semana 6 <span>(19/09 ‚Äì 26/09)</span></h3>
        <p>
  Durante esta semana participaron todos los integrantes del equipo y el trabajo volvi√≥ a centrarse en la pantalla OLED, que hasta el momento no hab√≠a podido ser utilizada con √©xito. 
  Se realizaron nuevas pruebas modificando completamente el cableado para descartar errores de conexi√≥n y, con el apoyo del docente, se prob√≥ un nuevo c√≥digo de verificaci√≥n adaptado al ESP32. 
  A pesar de los ajustes y esfuerzos realizados, la pantalla continu√≥ sin mostrar resultados, por lo que el problema permanec√≠a como un desaf√≠o t√©cnico pendiente.
</p>

<p>
  Paralelamente, el grupo avanz√≥ en la actualizaci√≥n de la p√°gina web correspondiente al segundo informe. 
  En esta etapa se agregaron nuevas secciones y se reorganiz√≥ la estructura de los contenidos, incorporando p√°ginas espec√≠ficas para cada entrega de avances 
  (Avance 1, Avance 2 y Avance 3), con el fin de presentar de manera m√°s clara el progreso del proyecto.
</p>

<p>
  Finalmente, para descartar la posibilidad de que la pantalla OLED estuviera da√±ada, el equipo inici√≥ pruebas de funcionamiento utilizando una placa micro:bit. 
  En este proceso se descubri√≥ que el inconveniente se deb√≠a a un error de cableado, ya que se hab√≠an conectado √∫nicamente 4 pines en lugar de los 7 requeridos. 
  Una vez corregida la conexi√≥n, la pantalla logr√≥ encenderse y responder adecuadamente, confirmando que el dispositivo se encontraba en buen estado.
</p><br>
<h3>Prueba de pantalla OLED 0.96 en Micro:bit</h3>
  <p>
    Debido a las dificultades para hacer funcionar la pantalla OLED en el ESP32, el grupo decidi√≥ utilizar un <strong>Micro:bit</strong> como alternativa de prueba. 
    Para conectarla correctamente, fue necesario emplear un adaptador que permitiera acceder a todos los pines necesarios.
  </p>
  <p>
    En la primera prueba la pantalla tampoco funcion√≥, pero al investigar se descubri√≥ que el modelo utilizado era una 
    <strong>OLED 0.96" 128√ó64 de 7 pines, interfaz SPI</strong>. Esta informaci√≥n fue clave para comprender que se necesitaba la conexi√≥n de los 7 pines de la pantalla. 
    Una vez realizada la conexi√≥n completa, se procedi√≥ a probar un c√≥digo en Python y la pantalla logr√≥ encenderse, mostrando una carita sonriente.
  </p><br>
  
  <h4>C√≥digo en Python para Micro:bit</h4>
  <pre><code>
# micro:bit + OLED 0.96" SPI (128x64) - Carita :)
# Funciona con SSD1306 o SH1106 (cambiando CONTROLLER).
# Pines:
#  SCK  -> P13
#  MOSI -> P15
#  DC   -> P8
#  CS   -> P16
#  RST  -> P12
from microbit import *
import utime

CONTROLLER = 'SSD1306'  # √≥ 'SH1106'
W, H = 128, 64
COL_OFFSET = 2

PIN_SCK  = pin13
PIN_MOSI = pin15
PIN_DC   = pin8
PIN_CS   = pin16
PIN_RST  = pin12

# Configuraci√≥n SPI
spi.init(baudrate=8_000_000, mode=0, sclk=PIN_SCK, mosi=PIN_MOSI)

def cs(active): PIN_CS.write_digital(0 if active else 1)
def dc(is_data): PIN_DC.write_digital(1 if is_data else 0)
def rst_pulse():
    PIN_RST.write_digital(0); utime.sleep_ms(10)
    PIN_RST.write_digital(1); utime.sleep_ms(10)

# Inicializaci√≥n y funciones de dibujo (ssd1306_init, sh1106_init, pixel, circle, etc.)
# ...

# === DIBUJAR CARITA ===
init_display()
clear()
for t in range(0, 3): circle(64, 32, 28 - t, 1)  # contorno cara
fill_circle(48, 26, 3, 1)  # ojo izquierdo
fill_circle(80, 26, 3, 1)  # ojo derecho
arc_lower(64, 40, 18, thick=2, c=1)  # sonrisa
hline(42, 18, 12, 1)  # ceja izquierda
hline(74, 18, 12, 1)  # ceja derecha
show()
  </code></pre><br>
  <h3>Prueba de Pantalla OLED 0.96" 128√ó64 (7 pines i2C/SPI) en ESP32</h3>

  <p>
    Una vez que comprobamos que la pantalla funcionaba y que ten√≠amos la nueva informaci√≥n del modelo, 
    procedimos a intentar levantarla en el ESP32, esta vez utilizando los 7 pines. 
    Para la conexi√≥n de la pantalla al ESP32 fue necesario emplear una protoboard y 7 cables macho‚Äìmacho. 
  </p>

  <p>
    En esta oportunidad logramos que funcionara de primera instancia con el siguiente c√≥digo, 
    utilizando <strong>Arduino IDE 2.3.6</strong>.  
    El ejemplo result√≥ m√°s breve, ya que las librer√≠as incluidas en las primeras l√≠neas reducen 
    significativamente la cantidad de c√≥digo requerida.  
    Para la prueba, generamos un sketch en ChatGPT que mostrara el mensaje <em>‚ÄúHOLA!‚Äù</em>.
  </p>

  <h3>C√≥digo utilizado en Arduino IDE</h3>
  <pre><code>
#include &lt;SPI.h&gt;
#include &lt;Adafruit_GFX.h&gt;
#include &lt;Adafruit_SSD1306.h&gt;

#define SCREEN_WIDTH 128
#define SCREEN_HEIGHT 64

// Pines cableados:
#define OLED_SCK   18
#define OLED_MOSI  23
#define OLED_DC    19
#define OLED_CS     5
#define OLED_RST   22

// Constructor SPI: orden = (&SPI, DC, RST, CS)
Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &SPI, OLED_DC, OLED_RST, OLED_CS);

void setup() {
  Serial.begin(115200);

  // Asegur√° los pines de VSPI del ESP32:
  SPI.begin(OLED_SCK, /*MISO*/ 19, OLED_MOSI, OLED_CS);

  if (!display.begin(SSD1306_SWITCHCAPVCC)) {
    Serial.println("SSD1306 no encontrado (SPI).");
    while (true);
  }

  display.clearDisplay();
  display.drawRect(0, 0, 128, 64, SSD1306_WHITE);
  display.setTextSize(2);
  display.setTextColor(SSD1306_WHITE);
  display.setCursor(10, 24);
  display.println("Hola!");
  display.display();
}
  </code></pre> <br>
      </div>
    </div>
  </section>
  <!-- Footer -->
  <footer>
    <a href="#inicio" class="boton-volver">‚Üë Volver arriba</a>
    <p>&copy; 2025 Proyecto Acad√©mico</p>
  </footer>
</body>

</html>